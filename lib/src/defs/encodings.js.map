{"version":3,"sources":["../../../src/defs/encodings.js"],"names":["encodings","ASCII","chars","charCodes","extChars","regex","init","i","length","from","to","match","value","test","encode","result","replace","bind","push","Buffer","decode","p1","LATIN1","iconv","UCS2","Object","defineProperty","vfount","keys","find","item","writable"],"mappings":"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","sourcesContent":["/* eslint-disable no-param-reassign,camelcase,no-control-regex,object-shorthand,no-useless-escape*/\n\nimport iconv from 'iconv-lite';\n\nconst encodings = {};\n\nencodings.ASCII = {\n  // GSM 03.38\n  chars:\n    '@£$¥èéùìòÇ\\nØø\\rÅåΔ_ΦΓΛΩΠΨΣΘΞ\\x1BÆæßÉ !\"#¤%&\\'()*+,-./0123456789:;<=>?¡ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÑÜ§¿abcdefghijklmnopqrstuvwxyzäöñüà',\n  charCodes: {},\n  extChars: {},\n  regex: /^[@£$¥èéùìòÇ\\nØø\\rÅåΔ_ΦΓΛΩΠΨΣΘΞ\\x1BÆæßÉ !\"#¤%&\\'()*+,\\-./0-9:;<=>?¡A-ZÄÖÑÜ§¿a-zäöñüà\\f^{}\\\\[~\\]|€]*$/,\n  init: function() {\n    for (let i = 0; i < this.chars.length; i++) {\n      this.charCodes[this.chars[i]] = i;\n    }\n    const from = '\\f^{}\\\\[~]|€';\n    const to = '\\nΛ()/<=>¡e';\n    for (let i = 0; i < from.length; i++) {\n      this.extChars[from[i]] = to[i];\n      this.extChars[to[i]] = from[i];\n    }\n  },\n  match: function(value) {\n    return this.regex.test(value);\n  },\n\n  encode: function(value) {\n    const result = [];\n    value = value.replace(\n      /[\\f^{}\\\\[~\\]|€]/g,\n      function(match) {\n        return '\\x1B' + this.extChars[match];\n      }.bind(this),\n    );\n    for (let i = 0; i < value.length; i++) {\n      result.push(value[i] in this.charCodes ? this.charCodes[value[i]] : 0x20);\n    }\n    return new Buffer(result);\n  },\n  decode: function(value) {\n    let result = '';\n    for (let i = 0; i < value.length; i++) {\n      result += this.chars[value[i]] || ' ';\n    }\n    result = result.replace(\n      /\\x1B([\\nΛ()\\/<=>¡e])/g,\n      function(match, p1) {\n        return this.extChars[p1];\n      }.bind(this),\n    );\n    return result;\n  },\n};\n\nencodings.ASCII.init();\n\nencodings.LATIN1 = {\n  match: (value) =>\n    value === iconv.decode(iconv.encode(value, 'latin1'), 'latin1'),\n  encode: (value) => iconv.encode(value, 'latin1'),\n  decode: (value) => iconv.decode(value, 'latin1'),\n};\n\nencodings.UCS2 = {\n  match: (value) => true, // eslint-disable-line\n  encode: (value) => iconv.encode(value, 'utf16-be'),\n  decode: (value) => iconv.decode(value, 'utf16-be'),\n};\n\n// Object.defineProperty(encodings, 'detect', {\n//   value: (value) => {\n//     for (var key in encodings) {\n//       if (encodings[key].match(value)) {\n//         return key;\n//       }\n//     }\n//     return false;\n//   },\n// });\n\nObject.defineProperty(encodings, 'detect', {\n  value: (value) => {\n    const vfount = Object.keys(encodings).find((item) =>\n      encodings[item].match(value),\n    );\n    return vfount || false;\n  },\n});\n\nObject.defineProperty(encodings, 'default', {\n  value: 'ASCII',\n  writable: true,\n});\n\nexport { encodings };\n"],"file":"encodings.js"}